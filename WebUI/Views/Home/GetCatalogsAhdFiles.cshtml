@model WebUI.ViewModels.GetCatalogsAhdFilesViewModel
@{
    ViewData["Title"] = "Каталог";
}

<style>
    #div_1:hover {
        background: lightblue;
    }
</style>

<script src="jquery-1.10.1.min.js"></script>

@section Header
{
    <nav class="navbar navbar-expand-sm navbar-toggleable-sm navbar-light bg-white border-bottom box-shadow mb-3">
        <div class="navbar-collapse collapse d-sm-inline-flex justify-content-between">
            <div class="navbar-collapse collapse d-sm-inline-flex justify-content-between">
                <ul class="navbar-nav flex-grow-1">
                    <li class="nav-item">
                        <a class="nav-link text-dark font-weight-bold" asp-action="GetPcDisks">Мой компьютер</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link text-dark font-weight-bold" href="javascript:history.back()">Назад</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
}

<h4>Директория: @Model.Path</h4>
<h4>Папки директории: @Model.Catalogs.Count()</h4>
<h4>Фалы директории: @Model.Files.Count()</h4>
<br />

<table id="table">
    <tr>
        <td>
            <div class="form-inline">
                <form method="post" asp-action="GetFilterDataByName" asp-route-path="@Model.Path">
                    <b>Имя:</b>
                    <input name="elementName" />
                    <input type="submit" value="Поиск" />
                    &ensp;
                </form>
                <form method="post" asp-action="GetFilterDataByName" asp-route-path="@Model.Path">
                    <input type="submit" value="Показать всех" />
                </form>
            </div>
        </td>
        <td>
            <form method="post">
                <div class="form-inline">
                    &emsp;
                    <b>Размер:</b>
                    &ensp;
                    <input asp-action="GetSortDataBySize" asp-route-path="@Model.Path" asp-route-sortBySize="ascending" type="submit" value="По возрастанию" />
                    &ensp;
                    <input asp-action="GetSortDataBySize" asp-route-path="@Model.Path" asp-route-sortBySize="descending" type="submit" value="По убыванию" />
                    &ensp;
                    <input asp-action="GetSortDataBySize" asp-route-path="@Model.Path" asp-route-sortBySize="noAccessToFile" type="submit" value="Файл без доступа" />
                </div>
            </form>
        </td>
    </tr>

    @if (Model.Catalogs.Count() != 0)
    {
        @foreach (var item in Model.Catalogs)
        {
            <tr>
                <td>
                    <div id="div_1">
                        <a style="color:black; text-decoration:none" asp-action="TransitionToCatalog" asp-route-path="@item.PathName">
                            <div>
                                <image width="60" src="@item.Image"></image>
                                <b>@item.Name</b>
                            </div>
                        </a>
                    </div>
                </td>
                @item.GetSizeElement(item)
                @if (item.NoAccessToFile == false)
                    {
                        @if (item.TypeOfSize == "GB")
                        {
                            <td>
                                <b>&emsp;@item.SizeElement ГБ</b>
                            </td>
                        }
                        else if (item.TypeOfSize == "MB")
                        {
                            <td>
                                <b style="color:dimgrey">&emsp;@item.SizeElement МБ</b>
                            </td>
                        }
                        else if (item.TypeOfSize == "KB")
                        {
                            <td>
                                <b style="color:lightgrey">&emsp;@item.SizeElement КБ</b>
                            </td>
                        }

                    }
                    else
                    {
                        <td>
                            <b style="color:darkorange">&emsp;Нет доступа к файлу</b>
                        </td>
                    }
                @*<td>
                    <b onload="myfunction" id="@item.PathName" style="color:forestgreen">
                        Расчет занимаегого места
                    </b>
                    <script>
                        document.addEventListener('DOMContentLoaded', function () {
                            var b = document.getElementById("@item.PathName");
                            b.innerText = "HIIIIII";                            
                        }, false);                        
                    </script>
                </td>*@
            </tr>
        }
    }

    @if (Model.Files.Count() != 0)
        {
            @foreach (var item in Model.Files)
            {
                <tr>
                    <td>
                        <image width="60" src="@item.Image"></image>
                        <b>@item.Name</b>
                    </td>
                    @if (item.TypeOfSize == "GB")
                    {
                        <td>
                            <b>&emsp;@item.SizeElement ГБ</b>
                        </td>
                    }
                    else if (item.TypeOfSize == "MB")
                    {
                        <td>
                            <b style="color:dimgrey">&emsp;@item.SizeElement МБ</b>
                        </td>
                    }
                    else if (item.TypeOfSize == "KB")
                    {
                        <td>
                            <b style="color:lightgrey">&emsp;@item.SizeElement КБ</b>
                        </td>
                    }
                </tr>
            }
        }
   
</table>

<script>
    function myfunction(e) {
        
    }
</script>